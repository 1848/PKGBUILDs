plugrel=1

pkgname=tenderloin-touchserver
pkgver=20111224
pkgrel=1
pkgdesc="Touch input for HP TouchPad - Tenderloin"
arch=('armv7h')
url="http://www.quicinc.com/"
license=('GPL')
depends=('xorg-server')
makedepends=('git')
source=('linux-input.patch')
md5sums=(9bf8f56ef91c5c77c74ea76c9c870ddb)
_gitroot="git://github.com/jcsullins/ts_srv_tenderloin.git"
_gitname="ts_srv_tenderloin"

build() {
  cd $srcdir

 ## Git checkout
  msg "Git checkout:  Retrieving sources"
  rm -rf ${_gitname}
  git clone ${_gitroot}
  msg "Checkout completed"

  cd $srcdir/${_gitname}
  # PATCH: Change location of input for Linux kernel
  cp $srcdir/linux-input.patch $srcdir/${_gitname}/
  patch -p1 < linux-input.patch

  gcc -lm ts_srv.c -o ts_srv
}

package() { 
  cd $srcdir/${_gitname}/
  install -d $pkgdir/usr/bin
  install -D -m755 ts_srv $pkgdir/usr/bin/
}
