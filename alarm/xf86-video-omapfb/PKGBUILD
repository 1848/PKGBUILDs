# Maintainer: Kevin Mihelich <kevin@archlinuxarm.org>

# OMAP FrameBuffer driver for Xorg

buildarch=4

pkgname="xf86-video-omapfb"
pkgver=0.1.1.1
pkgrel=4
arch=('armv7h')
url="http://gitweb.pingu.fi/?p=xf86-video-omapfb.git"
license=('GPL2')
makedepends=('pkgconfig' 'xorg-server-devel' 'resourceproto' 'scrnsaverproto')
options=('!libtool')
source=("http://archlinuxarm.org/builder/src/xf86-video-omapfb_0.1.1.1.tar.gz"
        "xorg-api.patch")
md5sums=('a9bca5424bd76d53b78826f9d5fa4abe'
         '30d0a22f99654dfa4c8249cd76ad6839')

build() {
  cd "${srcdir}/${pkgname}-${pkgver}"
  patch -p1 -i ../xorg-api.patch
  ./autogen.sh
  ./configure --prefix=/usr

  make
}

package() {
  pkgdesc="OMAP3+ framebuffer driver for X"

  cd "${srcdir}/${pkgname}-${pkgver}"

  make DESTDIR="${pkgdir}" install
}
