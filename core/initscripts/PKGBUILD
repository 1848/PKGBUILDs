# Maintainer: Mike Staszel <mikestaszel@plugapps.com>

# ALARM changes: inittab has a line for ttyS0 at 115200, 2 ttys
#                   for armv5te, 6 for armv7
#                   rc.shutdown has an LED turn-off line
#                   rc.conf is different
#                   rc.sysinit has our copyright info

pkgname=initscripts
pkgver=2011.07.3
pkgrel=1
pkgdesc="System initialization/bootup scripts"
plugrel=1
arch=('arm' 'armv7h')
url="http://www.archlinuxarm.org"
license=('GPL2')
groups=('base')
backup=(etc/inittab etc/rc.conf etc/rc.local etc/rc.local.shutdown etc/conf.d/wireless)
depends=('glibc' 'bash' 'grep' 'coreutils' 'udev>=171' 'iproute2'
         'ncurses' 'kbd' 'findutils' 'sysvinit')
optdepends=('bridge-utils: Network bridging support'
            'dhcpcd: DHCP network configuration'
            'net-tools: legacy network support'
            'wireless_tools: Wireless networking')
install=initscripts.install
source=(arch-tmpfiles
        bash-completion
        bootlog
        functions
        hwclock
        inittab
        inittab.armv7
        Makefile
        minilogd.c
        netfs
        network
        rc.conf
        rc.d
        rc.local
        rc.local.shutdown
        rc.multi
        rc.shutdown
        rc.single
        rc.sysinit
        tmpfiles.conf
        wireless.conf.d
        zsh-completion)
#md5sums()

package() {
  cd ${srcdir}
  make DESTDIR=${pkgdir} install
  install -D -m644 ${srcdir}/wireless.conf.d ${pkgdir}/etc/conf.d/wireless

  # On the armv7 boards, all ttys are enabled in this inittab file
  if [ "${CARCH}" = "armv7h" ]; then
     install -D -m644 inittab.armv7 ${pkgdir}/etc/inittab
  fi
}
